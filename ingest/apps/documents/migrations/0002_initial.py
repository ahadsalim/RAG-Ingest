# Generated by Django 5.0.8 on 2025-10-06 05:38

import django.db.models.deletion
import django.utils.timezone
import mptt.fields
import simple_history.models
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('documents', '0001_initial'),
        ('masterdata', '0002_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='HistoricalInstrumentWork',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('title_official', models.CharField(max_length=500, verbose_name='عنوان رسمی')),
                ('doc_type', models.CharField(choices=[('law', 'قانون'), ('bylaw', 'آیین\u200cنامه'), ('circular', 'بخشنامه'), ('ruling', 'رأی'), ('decree', 'مصوبه'), ('regulation', 'مقررات'), ('instruction', 'دستورالعمل'), ('other', 'سایر')], default='law', max_length=20, verbose_name='نوع سند')),
                ('urn_lex', models.CharField(blank=True, help_text='ir:authority:doc_type:yyyy-mm-dd:number<br>مثال: ir:majlis:law:2020-06-01:123', max_length=200, verbose_name='URN LEX')),
                ('subject_summary', models.TextField(blank=True, verbose_name='خلاصه موضوع')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('authority', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='masterdata.issuingauthority', verbose_name='مرجع صادرکننده')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('jurisdiction', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='masterdata.jurisdiction', verbose_name='حوزه قضایی')),
                ('primary_language', models.ForeignKey(blank=True, db_constraint=False, default=None, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='masterdata.language', verbose_name='زبان اصلی')),
            ],
            options={
                'verbose_name': 'historical تعریف سند حقوقی',
                'verbose_name_plural': 'historical تعریف اسناد حقوقی',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='InstrumentExpression',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('consolidation_level', models.CharField(choices=[('base', 'پایه'), ('consolidated', 'تجمیع شده'), ('annotated', 'حاشیه نویسی')], default='base', max_length=20, verbose_name='سطح تلفیق')),
                ('expression_date', models.DateField(blank=True, null=True, verbose_name='تاریخ نسخه')),
                ('eli_uri_expr', models.URLField(blank=True, verbose_name='ELI URI بیان')),
                ('language', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='masterdata.language', verbose_name='زبان')),
            ],
            options={
                'verbose_name': 'تعریف نسخه سند',
                'verbose_name_plural': 'تعریف نسخه سند',
            },
        ),
        migrations.CreateModel(
            name='HistoricalInstrumentManifestation',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('publication_date', models.DateField(verbose_name='تاریخ انتشار')),
                ('official_gazette_name', models.CharField(blank=True, max_length=200, verbose_name='نام روزنامه رسمی')),
                ('gazette_issue_no', models.CharField(blank=True, max_length=50, verbose_name='شماره نامه')),
                ('page_start', models.PositiveIntegerField(blank=True, null=True, verbose_name='صفحه شروع-پایان')),
                ('source_url', models.URLField(blank=True, verbose_name='ELI URI / URL منبع')),
                ('checksum_sha256', models.CharField(blank=True, db_index=True, max_length=64, verbose_name='چکسام SHA256')),
                ('in_force_from', models.DateField(blank=True, null=True, verbose_name='اجرا از تاریخ')),
                ('repeal_status', models.CharField(choices=[('in_force', 'جاری و لازم الاجرا'), ('repealed', 'لغو یا منسوخ شده')], default='in_force', max_length=20, verbose_name='وضعیت سند')),
                ('in_force_to', models.DateField(blank=True, help_text='در صورتی که وضعیت سند "لغو یا منسوخ شده" باشد، این فیلد الزامی است.', null=True, verbose_name='اجرا تا تاریخ')),
                ('retrieval_date', models.DateTimeField(blank=True, editable=False, verbose_name='تاریخ بازیابی')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('expr', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.instrumentexpression', verbose_name='نسخه سند')),
            ],
            options={
                'verbose_name': 'historical تعریف انتشار سند',
                'verbose_name_plural': 'historical تعریف انتشار سند',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='InstrumentManifestation',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('publication_date', models.DateField(verbose_name='تاریخ انتشار')),
                ('official_gazette_name', models.CharField(blank=True, max_length=200, verbose_name='نام روزنامه رسمی')),
                ('gazette_issue_no', models.CharField(blank=True, max_length=50, verbose_name='شماره نامه')),
                ('page_start', models.PositiveIntegerField(blank=True, null=True, verbose_name='صفحه شروع-پایان')),
                ('source_url', models.URLField(blank=True, verbose_name='ELI URI / URL منبع')),
                ('checksum_sha256', models.CharField(blank=True, max_length=64, unique=True, verbose_name='چکسام SHA256')),
                ('in_force_from', models.DateField(blank=True, null=True, verbose_name='اجرا از تاریخ')),
                ('repeal_status', models.CharField(choices=[('in_force', 'جاری و لازم الاجرا'), ('repealed', 'لغو یا منسوخ شده')], default='in_force', max_length=20, verbose_name='وضعیت سند')),
                ('in_force_to', models.DateField(blank=True, help_text='در صورتی که وضعیت سند "لغو یا منسوخ شده" باشد، این فیلد الزامی است.', null=True, verbose_name='اجرا تا تاریخ')),
                ('retrieval_date', models.DateTimeField(auto_now_add=True, verbose_name='تاریخ بازیابی')),
                ('expr', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='manifestations', to='documents.instrumentexpression', verbose_name='نسخه سند')),
            ],
            options={
                'verbose_name': 'تعریف انتشار سند',
                'verbose_name_plural': 'تعریف انتشار سند',
            },
        ),
        migrations.CreateModel(
            name='InstrumentWork',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('title_official', models.CharField(max_length=500, verbose_name='عنوان رسمی')),
                ('doc_type', models.CharField(choices=[('law', 'قانون'), ('bylaw', 'آیین\u200cنامه'), ('circular', 'بخشنامه'), ('ruling', 'رأی'), ('decree', 'مصوبه'), ('regulation', 'مقررات'), ('instruction', 'دستورالعمل'), ('other', 'سایر')], default='law', max_length=20, verbose_name='نوع سند')),
                ('urn_lex', models.CharField(blank=True, help_text='ir:authority:doc_type:yyyy-mm-dd:number<br>مثال: ir:majlis:law:2020-06-01:123', max_length=200, verbose_name='URN LEX')),
                ('subject_summary', models.TextField(blank=True, verbose_name='خلاصه موضوع')),
                ('authority', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='instrument_works', to='masterdata.issuingauthority', verbose_name='مرجع صادرکننده')),
                ('jurisdiction', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='instrument_works', to='masterdata.jurisdiction', verbose_name='حوزه قضایی')),
                ('primary_language', models.ForeignKey(blank=True, default=None, null=True, on_delete=django.db.models.deletion.SET_NULL, to='masterdata.language', verbose_name='زبان اصلی')),
            ],
            options={
                'verbose_name': 'تعریف سند حقوقی',
                'verbose_name_plural': 'تعریف اسناد حقوقی',
            },
        ),
        migrations.CreateModel(
            name='InstrumentRelation',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('relation_type', models.CharField(choices=[('amends', 'اصلاح می\u200cکند'), ('repeals', 'لغو می\u200cکند'), ('references', 'ارجاع می\u200cدهد'), ('implements', 'اجرا می\u200cکند'), ('derives_from', 'مشتق از'), ('supersedes', 'جایگزین می\u200cشود')], max_length=30, verbose_name='نوع رابطه')),
                ('effective_date', models.DateField(blank=True, null=True, verbose_name='تاریخ اثر')),
                ('notes', models.TextField(blank=True, verbose_name='یادداشت\u200cها')),
                ('from_work', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='outgoing_relations', to='documents.instrumentwork', verbose_name='اثر مبدأ')),
                ('to_work', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='incoming_relations', to='documents.instrumentwork', verbose_name='اثر مقصد')),
            ],
            options={
                'verbose_name': 'رابطه ابزار حقوقی',
                'verbose_name_plural': 'ارتباط اسناد حقوقی',
            },
        ),
        migrations.AddField(
            model_name='instrumentexpression',
            name='work',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='expressions', to='documents.instrumentwork', verbose_name='سند حقوقی'),
        ),
        migrations.CreateModel(
            name='IngestLog',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('operation_type', models.CharField(choices=[('create', 'ایجاد'), ('update', 'به\u200cروزرسانی'), ('delete', 'حذف'), ('bulk_import', 'واردات انبوه'), ('sync', 'همگام\u200cسازی')], max_length=20, verbose_name='نوع عملیات')),
                ('source_system', models.CharField(default='manual', max_length=50, verbose_name='سیستم مبدأ')),
                ('source_id', models.CharField(blank=True, max_length=100, verbose_name='شناسه مبدأ')),
                ('status', models.CharField(choices=[('pending', 'در انتظار'), ('processing', 'در حال پردازش'), ('success', 'موفق'), ('failed', 'ناموفق'), ('partial', 'جزئی')], default='pending', max_length=20, verbose_name='وضعیت')),
                ('records_processed', models.PositiveIntegerField(default=0, verbose_name='رکوردهای پردازش\u200cشده')),
                ('records_failed', models.PositiveIntegerField(default=0, verbose_name='رکوردهای ناموفق')),
                ('error_message', models.TextField(blank=True, verbose_name='پیام خطا')),
                ('metadata', models.JSONField(blank=True, default=dict, verbose_name='متادیتا')),
                ('started_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='started_ingests', to=settings.AUTH_USER_MODEL, verbose_name='شروع\u200cکننده')),
                ('target_expression', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ingest_logs', to='documents.instrumentexpression', verbose_name='بیان هدف')),
                ('target_manifestation', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ingest_logs', to='documents.instrumentmanifestation', verbose_name='تجلی هدف')),
                ('target_work', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ingest_logs', to='documents.instrumentwork', verbose_name='اثر هدف')),
            ],
            options={
                'verbose_name': 'لاگ واردات',
                'verbose_name_plural': 'لاگ\u200cهای واردات',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='HistoricalInstrumentRelation',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('relation_type', models.CharField(choices=[('amends', 'اصلاح می\u200cکند'), ('repeals', 'لغو می\u200cکند'), ('references', 'ارجاع می\u200cدهد'), ('implements', 'اجرا می\u200cکند'), ('derives_from', 'مشتق از'), ('supersedes', 'جایگزین می\u200cشود')], max_length=30, verbose_name='نوع رابطه')),
                ('effective_date', models.DateField(blank=True, null=True, verbose_name='تاریخ اثر')),
                ('notes', models.TextField(blank=True, verbose_name='یادداشت\u200cها')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('from_work', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.instrumentwork', verbose_name='اثر مبدأ')),
                ('to_work', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.instrumentwork', verbose_name='اثر مقصد')),
            ],
            options={
                'verbose_name': 'historical رابطه ابزار حقوقی',
                'verbose_name_plural': 'historical ارتباط اسناد حقوقی',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalInstrumentExpression',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('consolidation_level', models.CharField(choices=[('base', 'پایه'), ('consolidated', 'تجمیع شده'), ('annotated', 'حاشیه نویسی')], default='base', max_length=20, verbose_name='سطح تلفیق')),
                ('expression_date', models.DateField(blank=True, null=True, verbose_name='تاریخ نسخه')),
                ('eli_uri_expr', models.URLField(blank=True, verbose_name='ELI URI بیان')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('language', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='masterdata.language', verbose_name='زبان')),
                ('work', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.instrumentwork', verbose_name='سند حقوقی')),
            ],
            options={
                'verbose_name': 'historical تعریف نسخه سند',
                'verbose_name_plural': 'historical تعریف نسخه سند',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalIngestLog',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('operation_type', models.CharField(choices=[('create', 'ایجاد'), ('update', 'به\u200cروزرسانی'), ('delete', 'حذف'), ('bulk_import', 'واردات انبوه'), ('sync', 'همگام\u200cسازی')], max_length=20, verbose_name='نوع عملیات')),
                ('source_system', models.CharField(default='manual', max_length=50, verbose_name='سیستم مبدأ')),
                ('source_id', models.CharField(blank=True, max_length=100, verbose_name='شناسه مبدأ')),
                ('status', models.CharField(choices=[('pending', 'در انتظار'), ('processing', 'در حال پردازش'), ('success', 'موفق'), ('failed', 'ناموفق'), ('partial', 'جزئی')], default='pending', max_length=20, verbose_name='وضعیت')),
                ('records_processed', models.PositiveIntegerField(default=0, verbose_name='رکوردهای پردازش\u200cشده')),
                ('records_failed', models.PositiveIntegerField(default=0, verbose_name='رکوردهای ناموفق')),
                ('error_message', models.TextField(blank=True, verbose_name='پیام خطا')),
                ('metadata', models.JSONField(blank=True, default=dict, verbose_name='متادیتا')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('started_by', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='شروع\u200cکننده')),
                ('target_expression', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.instrumentexpression', verbose_name='بیان هدف')),
                ('target_manifestation', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.instrumentmanifestation', verbose_name='تجلی هدف')),
                ('target_work', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.instrumentwork', verbose_name='اثر هدف')),
            ],
            options={
                'verbose_name': 'historical لاگ واردات',
                'verbose_name_plural': 'historical لاگ\u200cهای واردات',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='LegalUnit',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('unit_type', models.CharField(choices=[('part', 'بخش'), ('chapter', 'فصل'), ('section', 'قسمت'), ('article', 'ماده'), ('clause', 'بند'), ('subclause', 'زیربند'), ('note', 'تبصره'), ('appendix', 'ضمیمه')], max_length=20, verbose_name='نوع واحد')),
                ('number', models.CharField(blank=True, max_length=50, verbose_name='شماره')),
                ('order_index', models.PositiveIntegerField(default=0, verbose_name='ترتیب')),
                ('path_label', models.CharField(blank=True, max_length=500, verbose_name='مسیر کامل')),
                ('content', models.TextField(verbose_name='محتوا')),
                ('eli_fragment', models.CharField(blank=True, max_length=200, verbose_name='ELI Fragment')),
                ('xml_id', models.CharField(blank=True, max_length=100, verbose_name='XML ID')),
                ('valid_from', models.DateField(blank=True, db_index=True, help_text='تاریخ تصویب یا اجرای این واحد قانونی', null=True, verbose_name='تاریخ تصویب / اجرا')),
                ('valid_to', models.DateField(blank=True, db_index=True, help_text='تاریخ پایان اعتبار - خالی گذاشتن فیلد به معنی بدون تاریخ انقضا است.', null=True, verbose_name='تاریخ پایان اعتبار')),
                ('lft', models.PositiveIntegerField(editable=False)),
                ('rght', models.PositiveIntegerField(editable=False)),
                ('tree_id', models.PositiveIntegerField(db_index=True, editable=False)),
                ('level', models.PositiveIntegerField(editable=False)),
                ('expr', models.ForeignKey(blank=True, help_text='مرجع به نسخه سند (FRBR Expression)', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='units', to='documents.instrumentexpression', verbose_name='نسخه سند')),
                ('manifestation', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='units', to='documents.instrumentmanifestation', verbose_name='انتشار سند')),
                ('parent', mptt.fields.TreeForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='children', to='documents.legalunit', verbose_name='والد')),
                ('work', models.ForeignKey(blank=True, help_text='مرجع به سند حقوقی اصلی (FRBR Work)', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='units', to='documents.instrumentwork', verbose_name='سند حقوقی')),
            ],
            options={
                'verbose_name': 'جزء سند حقوقی',
                'verbose_name_plural': 'اجزاء سند حقوقی',
                'ordering': ['tree_id', 'lft'],
            },
        ),
        migrations.CreateModel(
            name='HistoricalQAEntry',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('question', models.TextField(verbose_name='سؤال')),
                ('answer', models.TextField(verbose_name='پاسخ')),
                ('status', models.CharField(choices=[('draft', 'پیش\u200cنویس'), ('under_review', 'در حال بررسی'), ('approved', 'تأیید شده'), ('rejected', 'رد شده')], default='draft', max_length=20, verbose_name='وضعیت')),
                ('approved_at', models.DateTimeField(blank=True, null=True, verbose_name='زمان تأیید')),
                ('canonical_question', models.CharField(blank=True, db_index=True, help_text='نسخه نرمال\u200cسازی شده سؤال برای جستجو', max_length=512, verbose_name='سؤال نرمال\u200cسازی شده')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('approved_by', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='تأیید کننده')),
                ('created_by', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='ایجادکننده')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('source_work', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.instrumentwork', verbose_name='سند حقوقی مرجع')),
                ('source_unit', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.legalunit', verbose_name='واحد حقوقی مرجع')),
            ],
            options={
                'verbose_name': 'historical ورودی پرسش و پاسخ',
                'verbose_name_plural': 'historical ورودی\u200cهای پرسش و پاسخ',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalPinpointCitation',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('citation_type', models.CharField(choices=[('direct', 'ارجاع مستقیم'), ('see_also', 'نگاه کنید به'), ('cf', 'مقایسه کنید'), ('but_see', 'اما نگاه کنید'), ('contra', 'در تضاد با')], default='direct', max_length=20, verbose_name='نوع ارجاع')),
                ('context_text', models.TextField(blank=True, verbose_name='متن زمینه')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('from_unit', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.legalunit', verbose_name='سند مبدأ')),
                ('to_unit', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.legalunit', verbose_name='سند اشاره شده')),
            ],
            options={
                'verbose_name': 'historical ارجاع دقیق',
                'verbose_name_plural': 'historical ارجاعات دقیق',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalLegalUnitVocabularyTerm',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('weight', models.PositiveSmallIntegerField(default=5, help_text='وزن ارتباط (1 تا 10)', verbose_name='وزن')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('vocabulary_term', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='masterdata.vocabularyterm', verbose_name='واژه')),
                ('legal_unit', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.legalunit', verbose_name='جزء سند')),
            ],
            options={
                'verbose_name': 'historical برچسب جزء سند',
                'verbose_name_plural': 'historical برچسب\u200cهای اجزاء سند',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalLegalUnitChange',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('change_type', models.CharField(choices=[('AMEND', 'تعدیل'), ('REPEAL', 'لغو'), ('SUBSTITUTE', 'جایگزینی'), ('ADD', 'اضافه'), ('REMOVE', 'حذف')], max_length=16, verbose_name='نوع تغییر')),
                ('effective_date', models.DateField(db_index=True, help_text='تاریخ اجرای قانونی تغییر (Gregorian)', verbose_name='تاریخ اجرا')),
                ('note', models.TextField(blank=True, help_text='توضیحات اضافی درباره تغییر', verbose_name='یادداشت')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('source_expression', models.ForeignKey(blank=True, db_constraint=False, help_text='نسخه سندی که این تغییر را معرفی کرده', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.instrumentexpression', verbose_name='نسخه سند مبدأ')),
                ('superseded_by', models.ForeignKey(blank=True, db_constraint=False, help_text='واحد قانونی که جایگزین این واحد شده (برای جایگزینی)', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.legalunit', verbose_name='جایگزین شده با')),
                ('unit', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.legalunit', verbose_name='واحد قانونی')),
            ],
            options={
                'verbose_name': 'historical تغییر واحد قانونی',
                'verbose_name_plural': 'historical تغییرات واحدهای قانونی',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalLegalUnit',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('unit_type', models.CharField(choices=[('part', 'بخش'), ('chapter', 'فصل'), ('section', 'قسمت'), ('article', 'ماده'), ('clause', 'بند'), ('subclause', 'زیربند'), ('note', 'تبصره'), ('appendix', 'ضمیمه')], max_length=20, verbose_name='نوع واحد')),
                ('number', models.CharField(blank=True, max_length=50, verbose_name='شماره')),
                ('order_index', models.PositiveIntegerField(default=0, verbose_name='ترتیب')),
                ('path_label', models.CharField(blank=True, max_length=500, verbose_name='مسیر کامل')),
                ('content', models.TextField(verbose_name='محتوا')),
                ('eli_fragment', models.CharField(blank=True, max_length=200, verbose_name='ELI Fragment')),
                ('xml_id', models.CharField(blank=True, max_length=100, verbose_name='XML ID')),
                ('valid_from', models.DateField(blank=True, db_index=True, help_text='تاریخ تصویب یا اجرای این واحد قانونی', null=True, verbose_name='تاریخ تصویب / اجرا')),
                ('valid_to', models.DateField(blank=True, db_index=True, help_text='تاریخ پایان اعتبار - خالی گذاشتن فیلد به معنی بدون تاریخ انقضا است.', null=True, verbose_name='تاریخ پایان اعتبار')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('expr', models.ForeignKey(blank=True, db_constraint=False, help_text='مرجع به نسخه سند (FRBR Expression)', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.instrumentexpression', verbose_name='نسخه سند')),
                ('manifestation', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.instrumentmanifestation', verbose_name='انتشار سند')),
                ('work', models.ForeignKey(blank=True, db_constraint=False, help_text='مرجع به سند حقوقی اصلی (FRBR Work)', null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.instrumentwork', verbose_name='سند حقوقی')),
                ('parent', mptt.fields.TreeForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.legalunit', verbose_name='والد')),
            ],
            options={
                'verbose_name': 'historical جزء سند حقوقی',
                'verbose_name_plural': 'historical اجزاء سند حقوقی',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalFileAsset',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('file', models.TextField(help_text='فایل مورد نظر را انتخاب کنید', max_length=100, verbose_name='فایل')),
                ('description', models.CharField(blank=True, max_length=255, verbose_name='توضیحات')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('uploaded_by', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='آپلودکننده')),
                ('manifestation', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.instrumentmanifestation', verbose_name='انتشار سند')),
                ('legal_unit', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.legalunit', verbose_name='جزء سند حقوقی')),
            ],
            options={
                'verbose_name': 'historical فایل ضمیمه',
                'verbose_name_plural': 'historical فایل\u200cهای ضمیمه',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalChunk',
            fields=[
                ('id', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(blank=True, editable=False)),
                ('chunk_text', models.TextField(verbose_name='متن چانک')),
                ('token_count', models.PositiveIntegerField(verbose_name='تعداد توکن')),
                ('overlap_prev', models.PositiveIntegerField(default=0, verbose_name='همپوشانی با قبلی')),
                ('citation_payload_json', models.JSONField(verbose_name='اطلاعات ارجاع')),
                ('hash', models.CharField(max_length=64, verbose_name='هش SHA-256')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('expr', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.instrumentexpression', verbose_name='نسخه سند')),
                ('unit', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='documents.legalunit', verbose_name='واحد حقوقی')),
            ],
            options={
                'verbose_name': 'historical چانک متن',
                'verbose_name_plural': 'historical چانک\u200cهای متن',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='FileAsset',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('file', models.FileField(help_text='فایل مورد نظر را انتخاب کنید', upload_to='documents/', verbose_name='فایل')),
                ('description', models.CharField(blank=True, max_length=255, verbose_name='توضیحات')),
                ('uploaded_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='uploaded_files', to=settings.AUTH_USER_MODEL, verbose_name='آپلودکننده')),
                ('manifestation', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='files', to='documents.instrumentmanifestation', verbose_name='انتشار سند')),
                ('legal_unit', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='files', to='documents.legalunit', verbose_name='جزء سند حقوقی')),
            ],
            options={
                'verbose_name': 'فایل ضمیمه',
                'verbose_name_plural': 'فایل\u200cهای ضمیمه',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Chunk',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('chunk_text', models.TextField(verbose_name='متن چانک')),
                ('token_count', models.PositiveIntegerField(verbose_name='تعداد توکن')),
                ('overlap_prev', models.PositiveIntegerField(default=0, verbose_name='همپوشانی با قبلی')),
                ('citation_payload_json', models.JSONField(verbose_name='اطلاعات ارجاع')),
                ('hash', models.CharField(max_length=64, verbose_name='هش SHA-256')),
                ('expr', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='chunks', to='documents.instrumentexpression', verbose_name='نسخه سند')),
                ('unit', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='chunks', to='documents.legalunit', verbose_name='واحد حقوقی')),
            ],
            options={
                'verbose_name': 'چانک متن',
                'verbose_name_plural': 'چانک\u200cهای متن',
                'ordering': ['expr', 'unit', 'id'],
            },
        ),
        migrations.CreateModel(
            name='LegalUnitChange',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('change_type', models.CharField(choices=[('AMEND', 'تعدیل'), ('REPEAL', 'لغو'), ('SUBSTITUTE', 'جایگزینی'), ('ADD', 'اضافه'), ('REMOVE', 'حذف')], max_length=16, verbose_name='نوع تغییر')),
                ('effective_date', models.DateField(db_index=True, help_text='تاریخ اجرای قانونی تغییر (Gregorian)', verbose_name='تاریخ اجرا')),
                ('note', models.TextField(blank=True, help_text='توضیحات اضافی درباره تغییر', verbose_name='یادداشت')),
                ('source_expression', models.ForeignKey(blank=True, help_text='نسخه سندی که این تغییر را معرفی کرده', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='introduced_changes', to='documents.instrumentexpression', verbose_name='نسخه سند مبدأ')),
                ('superseded_by', models.ForeignKey(blank=True, help_text='واحد قانونی که جایگزین این واحد شده (برای جایگزینی)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='supersedes', to='documents.legalunit', verbose_name='جایگزین شده با')),
                ('unit', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='changes', to='documents.legalunit', verbose_name='واحد قانونی')),
            ],
            options={
                'verbose_name': 'تغییر واحد قانونی',
                'verbose_name_plural': 'تغییرات واحدهای قانونی',
                'ordering': ['-effective_date', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='LegalUnitVocabularyTerm',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('weight', models.PositiveSmallIntegerField(default=5, help_text='وزن ارتباط (1 تا 10)', verbose_name='وزن')),
                ('legal_unit', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='unit_vocabulary_terms', to='documents.legalunit', verbose_name='جزء سند')),
                ('vocabulary_term', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='unit_vocabulary_terms', to='masterdata.vocabularyterm', verbose_name='واژه')),
            ],
            options={
                'verbose_name': 'برچسب جزء سند',
                'verbose_name_plural': 'برچسب\u200cهای اجزاء سند',
            },
        ),
        migrations.AddField(
            model_name='legalunit',
            name='vocabulary_terms',
            field=models.ManyToManyField(blank=True, related_name='legal_units', through='documents.LegalUnitVocabularyTerm', to='masterdata.vocabularyterm', verbose_name='برچسب\u200cها'),
        ),
        migrations.CreateModel(
            name='PinpointCitation',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('citation_type', models.CharField(choices=[('direct', 'ارجاع مستقیم'), ('see_also', 'نگاه کنید به'), ('cf', 'مقایسه کنید'), ('but_see', 'اما نگاه کنید'), ('contra', 'در تضاد با')], default='direct', max_length=20, verbose_name='نوع ارجاع')),
                ('context_text', models.TextField(blank=True, verbose_name='متن زمینه')),
                ('from_unit', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='outgoing_citations', to='documents.legalunit', verbose_name='سند مبدأ')),
                ('to_unit', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='incoming_citations', to='documents.legalunit', verbose_name='سند اشاره شده')),
            ],
            options={
                'verbose_name': 'ارجاع دقیق',
                'verbose_name_plural': 'ارجاعات دقیق',
            },
        ),
        migrations.CreateModel(
            name='QAEntry',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(default=django.utils.timezone.now)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('question', models.TextField(verbose_name='سؤال')),
                ('answer', models.TextField(verbose_name='پاسخ')),
                ('status', models.CharField(choices=[('draft', 'پیش\u200cنویس'), ('under_review', 'در حال بررسی'), ('approved', 'تأیید شده'), ('rejected', 'رد شده')], default='draft', max_length=20, verbose_name='وضعیت')),
                ('approved_at', models.DateTimeField(blank=True, null=True, verbose_name='زمان تأیید')),
                ('canonical_question', models.CharField(blank=True, db_index=True, help_text='نسخه نرمال\u200cسازی شده سؤال برای جستجو', max_length=512, verbose_name='سؤال نرمال\u200cسازی شده')),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_qa_entries', to=settings.AUTH_USER_MODEL, verbose_name='تأیید کننده')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_qa_entries', to=settings.AUTH_USER_MODEL, verbose_name='ایجادکننده')),
                ('source_unit', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='qa_entries', to='documents.legalunit', verbose_name='واحد حقوقی مرجع')),
                ('source_work', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='qa_entries', to='documents.instrumentwork', verbose_name='سند حقوقی مرجع')),
                ('tags', models.ManyToManyField(blank=True, related_name='qa_entries', to='masterdata.vocabularyterm', verbose_name='برچسب\u200cها')),
            ],
            options={
                'verbose_name': 'ورودی پرسش و پاسخ',
                'verbose_name_plural': 'ورودی\u200cهای پرسش و پاسخ',
                'ordering': ['-created_at'],
            },
        ),
        migrations.AddConstraint(
            model_name='instrumentmanifestation',
            constraint=models.CheckConstraint(check=models.Q(('in_force_to__gte', models.F('in_force_from')), ('in_force_to__isnull', True), _connector='OR'), name='valid_in_force_period'),
        ),
        migrations.AlterUniqueTogether(
            name='instrumentwork',
            unique_together={('jurisdiction', 'authority', 'doc_type', 'urn_lex')},
        ),
        migrations.AlterUniqueTogether(
            name='instrumentrelation',
            unique_together={('from_work', 'to_work', 'relation_type')},
        ),
        migrations.AlterUniqueTogether(
            name='instrumentexpression',
            unique_together={('work', 'language', 'consolidation_level', 'expression_date')},
        ),
        migrations.AlterUniqueTogether(
            name='chunk',
            unique_together={('expr', 'hash')},
        ),
        migrations.AddIndex(
            model_name='legalunitchange',
            index=models.Index(fields=['unit', 'effective_date'], name='documents_l_unit_id_d66bc7_idx'),
        ),
        migrations.AddIndex(
            model_name='legalunitchange',
            index=models.Index(fields=['effective_date'], name='documents_l_effecti_18c233_idx'),
        ),
        migrations.AddIndex(
            model_name='legalunitchange',
            index=models.Index(fields=['change_type', 'effective_date'], name='documents_l_change__fa0153_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='legalunitvocabularyterm',
            unique_together={('legal_unit', 'vocabulary_term')},
        ),
        migrations.AddConstraint(
            model_name='legalunit',
            constraint=models.CheckConstraint(check=models.Q(('valid_to__gte', models.F('valid_from')), ('valid_to__isnull', True), ('valid_from__isnull', True), _connector='OR'), name='valid_interval_order'),
        ),
        migrations.AddIndex(
            model_name='qaentry',
            index=models.Index(fields=['status', 'created_at'], name='documents_q_status_74d214_idx'),
        ),
        migrations.AddIndex(
            model_name='qaentry',
            index=models.Index(fields=['canonical_question'], name='documents_q_canonic_8346f1_idx'),
        ),
        migrations.AddIndex(
            model_name='qaentry',
            index=models.Index(fields=['approved_at'], name='documents_q_approve_a3bdb1_idx'),
        ),
    ]
