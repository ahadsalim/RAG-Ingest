{% extends "admin/base.html" %}
{% load static %}

{% block extrahead %}
{{ block.super }}
{% now "U" as timestamp %}
<link rel="shortcut icon" href="{% static 'favicon.ico' %}?v={{ timestamp }}" type="image/x-icon">
<link rel="icon" href="{% static 'favicon.ico' %}?v={{ timestamp }}" type="image/x-icon">
<link rel="stylesheet" href="{% static 'css/admin-rtl-fixes.css' %}">
<style>
    /* Scoped RTL for admin interface */
    .rtl-admin {
        direction: rtl;
        text-align: right;
        font-family: 'Vazirmatn', 'Tahoma', sans-serif;
    }
    
    .rtl-admin .jalali-date, 
    .rtl-admin .jalali-datetime {
        direction: ltr !important;
        text-align: left !important;
    }
    
    /* اطمینان از عملکرد صحیح action dropdown */
    .actions select[name="action"] {
        min-width: 200px;
        padding: 5px;
    }
    
    .actions button[type="submit"], 
    .actions input[type="submit"] {
        margin-right: 10px;
        padding: 5px 15px;
    }
    
    
    /* استایل خاص برای select - فقط ارتفاع - استثنا برای action dropdown */
    select:not(.actions select[name="action"]):not(select[name="action"]) {
        height: auto !important;
    }
    #header {
        display: flex !important;
        align-items: center !important;
        padding: 10px 20px !important;
        flex-wrap: wrap !important;
        position: relative !important;
    }
    
    #branding {
        flex: 1 !important;
        text-align: right !important;
        order: 1 !important;
    }
    
    .company-header {
        position: absolute !important;
        left: 50% !important;
        transform: translateX(-50%) !important;
        text-align: center !important;
        order: 2 !important;
        white-space: nowrap !important;
    }
    
    .company-header .company-name {
        font-family: 'Vazirmatn', 'Tahoma', sans-serif;
        font-size: 16px;
        font-weight: 600;
        margin: 0;
        line-height: 1.2;
    }
    
    .company-header .project-name {
        font-family: 'Vazirmatn', 'Tahoma', sans-serif;
        font-size: 12px;
        font-weight: 400;
        margin: 2px 0 0 0;
        line-height: 1.2;
    }
    
    .company-header .project-name .highlight {
        color: #e74c3c;
        font-weight: 500;
    }
    
    #user-tools {
        flex: 1 !important;
        text-align: left !important;
        order: 3 !important;
        font-family: 'Vazirmatn', 'Tahoma', sans-serif;
    }
    
    /* فارسی کردن تمام متن‌ها */
    .addlink, .changelink, .deletelink {
        font-family: 'Vazirmatn', 'Tahoma', sans-serif !important;
    }
    
    #content h1, .object-tools, .submit-row {
        font-family: 'Vazirmatn', 'Tahoma', sans-serif !important;
    }
    
    input[type="submit"], button {
        font-family: 'Vazirmatn', 'Tahoma', sans-serif !important;
    }
    
    /* مخفی کردن دکمه تغییر theme */
    .theme-toggle,
    button[data-theme-toggle],
    [class*="theme-toggle"],
    [id*="theme-toggle"],
    button[title*="Toggle theme"],
    button[aria-label*="Toggle theme"] {
        display: none !important;
    }
    
    @media (max-width: 768px) {
        #header {
            flex-direction: column !important;
            text-align: center !important;
        }
        
        #branding, .company-header, #user-tools {
            flex: none !important;
            text-align: center !important;
            order: unset !important;
            margin: 5px 0 !important;
        }
        
        .company-header .company-name {
            font-size: 14px;
        }
        
        .company-header .project-name {
            font-size: 11px;
        }
    }
    
    /* Dark theme compatibility */
    @media (prefers-color-scheme: dark) {
        .company-header .company-name,
        .company-header .project-name {
            color: inherit;
        }
    }
    
    /* Light theme */
    @media (prefers-color-scheme: light) {
        .company-header .company-name {
            color: #2c3e50;
        }
        
        .company-header .project-name {
            color: #34495e;
        }
    }
</style>

<script>
// فقط مخفی کردن theme toggle - بدون فارسی‌سازی
document.addEventListener('DOMContentLoaded', function() {
    const themeButtons = document.querySelectorAll(
        '.theme-toggle, button[data-theme-toggle], [class*="theme-toggle"], [id*="theme-toggle"], button[title*="Toggle theme"], button[aria-label*="Toggle theme"]'
    );
    themeButtons.forEach(button => {
        button.style.display = 'none';
    });
});
</script>
{% endblock %}

{% block title %}{{ title }} | {{ site_title|default:'مدیریت سایت' }}{% endblock %}

{% block branding %}
<h1 id="site-name"><a href="{% url 'admin:index' %}">{{ site_header|default:'سیستم مدیریت اسناد ' }}</a></h1>
<div class="company-header">
    <div class="company-name">شرکت ما</div>
</div>
{% endblock %}

{% block nav-global %}{% endblock %}

{% block bodyclass %}{{ block.super }} rtl-admin{% endblock %}
