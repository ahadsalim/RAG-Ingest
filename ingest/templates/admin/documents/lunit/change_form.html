{% extends "admin/change_form.html" %}

{% block breadcrumbs %}
{# حذف breadcrumbs - فقط h1 با path کامل نمایش داده شود #}
{% endblock %}

{% block field_sets %}
{# Override field_sets برای استفاده از table به جای fieldset #}
{% for fieldset in adminform %}
  <div class="module aligned">
    <table style="width: 100%; border-collapse: collapse;">
      {% for line in fieldset %}
        {% for field in line %}
          <tr>
            <td style="width: 150px; padding: 10px; vertical-align: top; text-align: right;">
              {{ field.field.label_tag }}
            </td>
            <td style="padding: 10px;">
              {{ field.field }}
              {% if field.field.help_text %}
                <div style="color: #666; font-size: 11px; margin-top: 5px;">{{ field.field.help_text }}</div>
              {% endif %}
              {% if field.field.errors %}
                <div style="color: red; margin-top: 5px;">{{ field.field.errors }}</div>
              {% endif %}
            </td>
          </tr>
        {% endfor %}
      {% endfor %}
    </table>
  </div>
{% endfor %}
{% endblock %}

{% block extrastyle %}
{{ block.super }}
<style>
    /* پنهان کردن دکمه‌های اضافی کنار فیلد parent */
    .field-parent .related-widget-wrapper-link,
    .field-parent a.related-widget-wrapper-link,
    .field-parent .related-lookup,
    .field-parent .changelink,
    .field-parent .addlink,
    .field-parent .viewlink {
        display: none !important;
        visibility: hidden !important;
    }
    
    /* پنهان کردن select اصلی parent و نمایش فقط autocomplete */
    .field-parent select {
        display: none !important;
    }
    
    /* تنظیم عرض فیلد parent autocomplete */
    .field-parent input[type="text"],
    .field-parent .parent-autocomplete-search {
        width: 500px !important;
        display: inline-block !important;
    }
    
    /* autocomplete dropdown */
    .parent-autocomplete-results,
    .ui-autocomplete,
    .select2-dropdown,
    .autocomplete-suggestions {
        z-index: 99999 !important;
        position: absolute !important;
        background: white !important;
        border: 1px solid #ccc !important;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2) !important;
    }
    
    /* Table و container ها */
    table,
    .module,
    #content-main,
    #content {
        overflow: visible !important;
    }
    
    /* فقط textarea overflow داشته باشد */
    textarea {
        overflow: auto !important;
    }
    
    /* فاصله برای parent autocomplete */
    tr:has(.field-parent) {
        position: relative;
    }
    
    tr:has(.field-parent) td:last-child {
        padding-bottom: 350px !important;
    }
    
    /* تنظیم عرض فیلدها برای جا شدن در یک خط */
    .field-order_index input {
        width: 80px !important;
        display: inline-block !important;
    }
    
    .field-unit_type select {
        width: 200px !important;
        display: inline-block !important;
    }
    
    .field-number input {
        width: 100px !important;
        display: inline-block !important;
    }
    
    /* تنظیم عرض فیلدهای تاریخ */
    .field-valid_from input,
    .field-valid_to input {
        width: 150px !important;
        display: inline-block !important;
    }
    
    /* حذف bold از label های فیلدها */
    .form-row label {
        font-weight: normal !important;
    }
    
    /* حذف bold از label های خاص */
    .field-order_index label,
    .field-unit_type label,
    .field-number label,
    .field-content label {
        font-weight: normal !important;
    }
</style>
{% endblock %}
